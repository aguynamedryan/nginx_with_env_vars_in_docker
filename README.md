This repo contains a small example that demonstrates how I might be able to get [nginx](https://nginx.org/) to pass environment variables through to my [Rails](http://rubyonrails.org/) apps in the most simple way possible.

I have some [Docker](https://www.docker.com/) containers that are orchestrated through [docker-compose](https://docs.docker.com/compose/overview/) and I'd like docker-compose to be the sole source of any environment variables I might like to pass to programs running in my containers as it is trivial to get docker-compose to read in [env files](https://docs.docker.com/compose/compose-file/compose-file-v2/#envfile).

nginx, by default, strips out all the environment variables before handing off a request to [passenger](https://www.phusionpassenger.com/), leaving my Rails apps without any configuration information that is stored in the environment.

It turns out we can use [nginx's env directive](https://nginx.org/en/docs/ngx_core_module.html#env) to [preserve environment variables](https://github.com/phusion/passenger-docker/tree/rel-0.9.18#nginx_env_vars).  Combine that with [passenger docker's](https://github.com/phusion/passenger-docker) handy [start up script abilities](https://github.com/phusion/passenger-docker/tree/rel-0.9.18#running_startup_scripts) and I can make it so that we detect the environment variables running in the container, and run a script that generates a white list in nginx for each of those variable names.  No more `.env` files in Rail's root directory.  It also means I no longer need [dotenv](https://github.com/bkeepers/dotenv) (though I do love that gem).
